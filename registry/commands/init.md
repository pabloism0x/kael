---
description: Generate project-specific .claude/ configuration from PRD
allowed-tools: Read, Write, Bash
argument-hint: <path-to-prd.md>
---

# Initialize Project Configuration

Generate a complete `.claude/` directory structure from a PRD (Project Requirement Document).

## Arguments

- `$ARGUMENTS` — Path to PRD.md file (default: `./PRD.md`)

## Process

### 1. Parse PRD

Read and validate the PRD file:

```yaml
# Required fields
name: string
description: string
stack:
  language: rust | typescript | python | go
type: library | cli | api | web | mobile

# Optional fields
features: []
constraints: []
mcp: []
agents: []
skills: []
```

### 2. Select Components

Based on `stack.language` and `type`, select appropriate agents and skills:

**Language Mapping:**
| Language | Base Agents | Language Agents | Skills |
|----------|-------------|-----------------|--------|
| rust | architect, reviewer, optimizer | runtime-expert, unsafe-auditor, perf-engineer | async-patterns, memory-optimization, error-handling |
| typescript | architect, reviewer, docs-writer | fullstack-expert, react-expert, node-expert | react-patterns, nextjs, testing |
| python | architect, reviewer, debugger | ml-engineer, backend-expert, data-engineer | fastapi, ml-ops |
| go | architect, reviewer, optimizer | systems-expert, api-expert | concurrency, testing |

**Type Mapping:**
| Type | Additional Skills |
|------|------------------|
| library | documentation, testing, ci-cd |
| cli | documentation, testing |
| api | testing, ci-cd, documentation |
| web | react-patterns, testing, ci-cd |

### 3. Generate CLAUDE.md

Create project-specific `CLAUDE.md` using template:

```markdown
# {name}

{description}

## Quick Facts
- **Stack**: {stack.language} / {stack.framework}
- **Type**: {type}

## Commands
[Generate based on stack]

## Architecture
[Reference to docs if exists]

## Constraints
{constraints as bullet list}

## ⚠️ Critical
[Extract from constraints]
```

### 4. Generate settings.json

Create optimized settings:

```json
{
  "tokenOptimization": {
    "lazyLoadSkills": true,
    "maxContextSize": 100000,
    "compactAfterTurns": 10
  },
  "mcp": {
    "autoLoad": false,
    "requireExplicitCall": true,
    "allowList": [/* from PRD.mcp */]
  },
  "agents": {
    "defaultModel": "sonnet",
    "heavyTaskModel": "opus"
  }
}
```

### 5. Copy Selected Agents

Copy only the agents specified in PRD or selected by language mapping:

```
.claude/agents/
├── architect.md      (from _base)
├── reviewer.md       (from _base)
└── [language-specific agents]
```

### 6. Copy Selected Skills

Copy only the skills specified in PRD or selected by mapping:

```
.claude/skills/
├── git-workflow/     (always)
├── testing/          (always)
└── [language-specific skills]
```

### 7. Generate Commands

Create project-specific commands:

```
.claude/commands/
├── review.md         (always)
├── test.md           (always)
└── [type-specific commands]
```

## Output Structure

```
.claude/
├── CLAUDE.md
├── settings.json
├── agents/
│   └── [selected agents]
├── skills/
│   └── [selected skills]
└── commands/
    └── [generated commands]
```

## Validation

After generation, verify:
- [ ] CLAUDE.md exists and is valid
- [ ] settings.json is valid JSON
- [ ] All referenced agents exist
- [ ] All referenced skills exist
- [ ] No circular references

## Example

```bash
# With explicit PRD path
/project:init ./docs/PRD.md

# With default PRD.md in root
/project:init
```

## Notes

- If `.claude/` already exists, ask before overwriting
- Preserve any custom files not generated by init
- Log all copied files for transparency